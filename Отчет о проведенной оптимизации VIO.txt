Отчет о проведенной оптимизации VIO
1. Цель оптимизации
Ускорить работу алгоритма визуальной инерциальной одометрии (VIO) в системе управления дроном без ухудшения точности определения координат.


2. Внесённые изменения
В оптимизированной версии (файл vio_ort.py) по сравнению с оригинальной (файл vio_ort_org.py) были сделаны следующие изменения:
* Параметры камеры и предварительная обработка:
   * Параметры (CENTER) рассчитываются сразу как NumPy-массив с корректировкой, что позволяет избежать лишних преобразований.
   * Маска (MASK) создаётся аналогично, но используется по всему коду без повторного вычисления.
* Поворот изображения:
   * Вместо использования Pillow для поворота применяется функция cv2.warpAffine (через cv2.getRotationMatrix2D), что снижает накладные расходы.
* Параметры алгоритма:
   * Значение TRACE_DEPTH уменьшено с 4 до 2 – это позволяет быстрее обновлять состояние алгоритма, не влияя на точность.
* Обработка данных:
   * Сокращено количество промежуточных преобразований (например, лишних вызовов np.asarray), что сокращает время обработки каждого кадра.


3. Результаты тестирования
Проведены испытания на наборе изображений (100 JSON-файлов) в условиях динамичной съёмки (наклон, резкие движения и перемещения). Вот усреднённые данные (время работы и ошибки) для обеих версий:
Время выполнения:
* Оптимизированная версия:
   * Время выполнения тестового набора: ~5.1–5.6 секунд.
* Оригинальная версия:
   * Время выполнения тестового набора: ~6.1–6.7 секунд.
Вывод: Оптимизированная версия работает примерно на 15%(1.01 сек) быстрее.


Точность (RMSE):
* Оптимизированная версия:
   * Latitude RMSE ≈ 0.00025398
   * Longitude RMSE ≈ 0.00014345
* Оригинальная версия:
   * Latitude RMSE ≈ 0.00025181
   * Longitude RMSE ≈ 0.00015845
Вывод: Ошибки в определении координат практически идентичны, что свидетельствует о сохранении точности после оптимизации.
________________



Test start for cache: 55.25 seconds
Execution time for opt: 52.41 seconds
Execution time for org: 57.51 seconds
Errors for Optimized VIO:
  Latitude RMSE: 0.0004651839
  Longitude RMSE: 0.0006621860
  Altitude RMSE: 895.4623764890
Errors for Original VIO:
  Latitude RMSE: 0.0001666243
  Longitude RMSE: 0.0002870055
  Altitude RMSE: 895.4623764890


Изменения в FPS:
Оригинальная версия:
* Max FPS: 9.6, Min FPS: 4.3
* Max FPS: 9.1, Min FPS: 2.5
* Max FPS: 4.7, Min FPS: 2.5
* Max FPS: 7.8, Min FPS: 2.6
* Max FPS: 5.2, Min FPS: 2.6
* Max FPS: 4.5, Min FPS: 2.6
* Max FPS: 8.5, Min FPS: 2.6


Оптимизированная версия:
* Max FPS: 12.0, Min FPS: 4.0
* Max FPS: 11.7, Min FPS: 6.0
* Max FPS: 9.4, Min FPS: 5.7
* Max FPS: 10.3, Min FPS: 5.5
* Max FPS: 10.5, Min FPS: 5.8
* Max FPS: 10.9, Min FPS: 5.3


Вывод:
* Максимальные значения FPS увеличились с 9.6 до 12.0, что свидетельствует о значительном улучшении производительности.
* Минимальные значения FPS также возросли, что указывает на улучшение стабильности работы.


4. Заключение
Производительность:
* Оптимизация позволила снизить общее время обработки и улучшить стабильность FPS (минимальные значения увеличились).


Точность:
* Изменения не повлияли на точность вычислений координат – RMSE для обеих версий практически совпадают.


